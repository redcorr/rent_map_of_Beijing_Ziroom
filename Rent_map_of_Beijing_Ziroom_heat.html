<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rent_map_of_Beijing_ziroom</title>
        <style>
            html, body, #map {
                margin: 0; padding: 0; width: 100%; height: 100%;
            }
        </style>
    </head>
    <body>
        <div id='map'  class = 'map'></div>
        <script src="https://webapi.amap.com/maps?key=【高德地图key】&v=1.4.15"></script>
        <script src="https://webapi.amap.com/loca?key=【高德地图key】&v=1.3.2"></script>
        <script src="uncomprehended_BUT_indispensable.js"></script>
        <!-- 不知道有什么用但是不可或缺，从高德示例得到 -->
        <script type="text/javascript">
            $.get("rent_info_with_geocode.csv", function(test){// 放到服务器上才能用
                const amap = new AMap.Map('map', {
                    mapStyle: 'amap://styles/dark',
                    zoom: 10,
                    center: [116.407394,39.904211]
                });

                const layer = new Loca.HeatmapLayer({
                    map: amap
                });

                layer.setData(test, {
                    type: 'csv',
                    lnglat: 'geo_code',   // 指定坐标数据的来源，数据格式: 经度在前，纬度在后，数组格式。
                    value: 'price'
                });

                layer.setOptions({
                    style: {
                        radius: 16,
                        opacity: [0.1, 0.8],
                        color: {
                            0.5: '#2c7bb6',
                            0.65: '#abd9e9',
                            0.7: '#ffffbf',
                            0.9: '#fde468',
                            1.0: '#d7191c'
                            }
                        }
                });
                
                layer.render();
                
                });
        </script>
    </body>
</html>